<!doctype html><html lang=ja><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.147.9"><title>アルバムシャッフル - 智朗の徒然日記</title><meta name=description content="降ったり曇ったり照ったり
アルバムシャッフル
iPodがソリッドステート化されてからはや幾星霜。
iPhoneに至るまで未だにアルバム単位のシャッフル再生がサポートされない。
しかたなく自作プログラムを使っていたのだが、
最近はコンパイル時に「もう古い」と警告が出るようになっていた。
なのでSwiftUIとMusicKitで作り直して、
選択したプレイリストをアルバム単位でシャッフルして、
SystemMusicPlayer.queueに放り込んで再生を始める所まではできた。"><link rel=stylesheet href=/diary/css/ui.css><script defer src=/diary/js/dark-mode.js></script><link disabled id=dark-mode-theme rel=stylesheet href=/diary/css/dark.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Fira+Mono|Lato|Raleway"><link href=https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css rel=stylesheet integrity=sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3 crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js integrity=sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p crossorigin=anonymous></script><link href=/diary/css/custom.css rel=stylesheet><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-NQC3P8K")</script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NQC3P8K" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><header class="container no-print"><div class=u-header><nav class=bar><ul><li><img class=icon-text id=dark-mode-toggle src=/diary/img/moon.svg alt="Toggle Dark Mode"></a></li><li><a href=/diary/>Diary</a></li><li><a href=/diary/post/>All</a></li><li><a href=https://tomoaki.akiyama.nu/>Home</a></li><li><a href=/diary/tags/>Tags</a></li></ul></nav></div></header><main class=container><article><header><hgroup id=brand><h1 class=mb-1>アルバムシャッフル</h1><h5><time datetime="2025-09-14 23:02:56 +0900 JST">2025年9月14日(Sun)</time>
<span class=no-print>-
<a href=/diary/tags/software>software</a>
<a href=/diary/tags/ios>ios</a>
<a href=/diary/tags/iphone>iphone</a>
<a href=/diary/tags/2025>2025</a>
<a href=/diary/tags/2025-09>2025-09</a>
<a href=/diary/tags/9%e6%9c%8814%e6%97%a5>9月14日</a>
<span></h5></hgroup><hr class=sep></header><p>降ったり曇ったり照ったり</p><h2 id=アルバムシャッフル>アルバムシャッフル</h2><p>iPodがソリッドステート化されてからはや幾星霜。
iPhoneに至るまで未だにアルバム単位のシャッフル再生がサポートされない。
しかたなく自作プログラムを使っていたのだが、
最近はコンパイル時に「もう古い」と警告が出るようになっていた。
なのでSwiftUIとMusicKitで作り直して、
選択したプレイリストをアルバム単位でシャッフルして、
SystemMusicPlayer.queueに放り込んで再生を始める所まではできた。</p><p>しかし曲の変わり目を検出する方法がわからない。
Google検索しても、ChatGPTやGeminiに聞いても、
ここ最近は二転三転しているようでうまくいかない。
Appleeのドキュメントも、
ざっと眺めただけではそれらしい場所にたどり着けない。</p><p>とりあえずはこれで、
表示やコントロールはMusicアプリやコントロールセンターに任せることにした。</p></article><nav class="no-print post-nav"><a class=prev-post href=https://tomoaki.akiyama.nu/diary/post/2025/09/13/><img class="icon-text mb-1 me-1" src=/diary/img/prev.svg>歯医者</a>
<a class=next-post href=https://tomoaki.akiyama.nu/diary/post/2025/09/15/>誕生日祝い<img class="icon-text mb-1 ms-1" src=/diary/img/next.svg></a></nav><section id=related><h4></h4><ul><li><a href=/diary/post/2025/09/10/>iPhone17</a></li><li><a href=/diary/post/2025/09/12/>詐欺メール</a></li><li><a href=/diary/post/2025/09/04/>Movable Type API</a></li></ul></section><hr class=sep></main><footer class="container no-print"><div class=u-footer><a href=mailto:tomoaki@akiyama.nu><img class=icon-social src=/diary/img/email.svg alt="Email Me!"></a>
<a href=https://github.com/tom-a/><img class=icon-social src=/diary/img/github.svg alt=Github></a>
<a href=https://twitter.com/tom_a/><img class=icon-social src=/diary/img/twitter.svg alt=Twitter></a><p><a href=https://github.com/yursan9/manis-hugo-theme>Manis</a><br>| <a href=https://creativecommons.org/licenses/by-sa/4.0/deed.ja><img alt=クリエイティブ・コモンズ・ライセンス style=border-width:0 src=https://i.creativecommons.org/l/by-sa/4.0/88x31.png></a></p><a href=#brand><img class=icon-text src=/diary/img/toup.svg alt="To Up">
<span></span></a></div></footer></body></html>