<!doctype html><html lang=ja><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.147.9"><title>8並列 - 智朗の徒然日記</title><meta name=description content="曇り
8並列
ffmpegで大量の(3000くらい)ファイルを変換する必要ができたので、
ちょっと調べてみた。
xargsを使うと割と簡単に並列処理ができそうなのだが、
なぜか少数のテストではうまくいったのに、
全部を相手にしたら3個処理したところで止まってしまう。
原因追及は時間がかかりそうなので、
対象ファイルのリストを8個にわけて、
それぞれにコマンドを追加したスクリプトファイルにした後、8個同時に実行。
頭の悪い方法だが、確実に動作する。
シングルスレッドの4倍くらいの速度で変換中。"><link rel=stylesheet href=/diary/css/ui.css><script defer src=/diary/js/dark-mode.js></script><link disabled id=dark-mode-theme rel=stylesheet href=/diary/css/dark.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Fira+Mono|Lato|Raleway"><link href=https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css rel=stylesheet integrity=sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3 crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js integrity=sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p crossorigin=anonymous></script><link href=/diary/css/custom.css rel=stylesheet><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-NQC3P8K")</script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NQC3P8K" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><header class="container no-print"><div class=u-header><nav class=bar><ul><li><img class=icon-text id=dark-mode-toggle src=/diary/img/moon.svg alt="Toggle Dark Mode"></a></li><li><a href=/diary/>Diary</a></li><li><a href=/diary/post/>All</a></li><li><a href=https://tomoaki.akiyama.nu/>Home</a></li><li><a href=/diary/tags/>Tags</a></li></ul></nav></div></header><main class=container><article><header><hgroup id=brand><h1 class=mb-1>8並列</h1><h5><time datetime="2020-05-04 21:37:10 +0900 JST">2020年5月4日(Mon)</time>
<span class=no-print>-
<a href=/diary/tags/software>software</a>
<a href=/diary/tags/video>video</a>
<a href=/diary/tags/%e5%8b%95%e7%94%bb>動画</a>
<a href=/diary/tags/2020>2020</a>
<a href=/diary/tags/2020-05>2020-05</a>
<a href=/diary/tags/5%e6%9c%884%e6%97%a5>5月4日</a>
<span></h5></hgroup><hr class=sep></header><p>曇り</p><h2 id=8並列>8並列</h2><p>ffmpegで大量の(3000くらい)ファイルを変換する必要ができたので、
ちょっと調べてみた。
xargsを使うと割と簡単に並列処理ができそうなのだが、
なぜか少数のテストではうまくいったのに、
全部を相手にしたら3個処理したところで止まってしまう。
原因追及は時間がかかりそうなので、
対象ファイルのリストを8個にわけて、
それぞれにコマンドを追加したスクリプトファイルにした後、8個同時に実行。
頭の悪い方法だが、確実に動作する。
シングルスレッドの4倍くらいの速度で変換中。</p><p><a href=https://photos.app.goo.gl/82RCPf6yBbJ98j5u5><a href=https://photos.app.goo.gl/82RCPf6yBbJ98j5u5>https://photos.app.goo.gl/82RCPf6yBbJ98j5u5</a></a></p></article><nav class="no-print post-nav"><a class=prev-post href=https://tomoaki.akiyama.nu/diary/post/2020/05/03/><img class="icon-text mb-1 me-1" src=/diary/img/prev.svg>空気圧確認</a>
<a class=next-post href=https://tomoaki.akiyama.nu/diary/post/2020/05/05/>1000km<img class="icon-text mb-1 ms-1" src=/diary/img/next.svg></a></nav><section id=related><h4></h4><ul><li><a href=/diary/post/2020/05/03/>空気圧確認</a></li><li><a href=/diary/post/2020/05/02/>洗車と確認</a></li><li><a href=/diary/post/2020/05/01/>日付</a></li></ul></section><hr class=sep></main><footer class="container no-print"><div class=u-footer><a href=mailto:tomoaki@akiyama.nu><img class=icon-social src=/diary/img/email.svg alt="Email Me!"></a>
<a href=https://github.com/tom-a/><img class=icon-social src=/diary/img/github.svg alt=Github></a>
<a href=https://twitter.com/tom_a/><img class=icon-social src=/diary/img/twitter.svg alt=Twitter></a><p><a href=https://github.com/yursan9/manis-hugo-theme>Manis</a><br>| <a href=https://creativecommons.org/licenses/by-sa/4.0/deed.ja><img alt=クリエイティブ・コモンズ・ライセンス style=border-width:0 src=https://i.creativecommons.org/l/by-sa/4.0/88x31.png></a></p><a href=#brand><img class=icon-text src=/diary/img/toup.svg alt="To Up">
<span></span></a></div></footer></body></html>